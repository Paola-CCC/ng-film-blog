<div class="register-container">
  <h3> Inscription </h3>
  <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="username">Nom d'utilisateur</label>
      <input type="text" 
        formControlName="username" 
        class="form-control" 
        id="username" 
        name="username"   
        placeholder="Nom d'utilisateur"
        [ngClass]="{ 'is-invalid': submitted && controlRegister['username'].errors || controlRegister['username'].touched && controlRegister['username'].invalid}"
      >
      <ng-template [ngIf]="controlRegister['username'].touched && controlRegister['username'].invalid" class="alert alert-danger">
        <div *ngIf="controlRegister['username'].errors && controlRegister['username'].errors['required']">Le nom d'utilisateur est requis</div>
        <div *ngIf="controlRegister['username'].errors && controlRegister['username'].errors['username']" [ngClass]= "'error'">Le nom d'utilisateur n'est pas valide</div>
      </ng-template>
    </div>

    <div class="form-group">
      <label for="email">Adresse Email</label>
      <input 
      type="email" 
      formControlName="email" 
      class="form-control" 
      id="email" 
      name="email" 
      placeholder="Adresse Email"
      [ngClass]="{ 'is-invalid': submitted && controlRegister['email'].errors || controlRegister['email'].touched && controlRegister['email'].invalid }"
      >
      <ng-template [ngIf]="controlRegister['email'].touched && controlRegister['email'].invalid" class="alert alert-danger">
          <div *ngIf="controlRegister['email'].errors && controlRegister['email'].errors['required']">L' Email requis.</div>
          <div *ngIf="controlRegister['email'].errors && controlRegister['email'].errors['email']" [ngClass]= "'error'">Email n'est pas valide</div>
      </ng-template>

    </div>
    <div class="form-group">
      <label for="password">Mot de passe</label>
      <input 
        type="password" 
        formControlName="password" 
        class="form-control" 
        id="password" 
        name="password"
        placeholder="Mot de passe"
        [ngClass]="{ 'is-invalid': submitted && controlRegister['password'].errors || controlRegister['password'].touched && controlRegister['password'].invalid }"
      >
      <ng-template [ngIf]="controlRegister['password'].touched && controlRegister['password'].invalid" class="alert alert-danger">
          <div *ngIf="controlRegister['password'].errors && controlRegister['password'].errors['required']">Le Mot de passe requis.</div>
          <div *ngIf="controlRegister['password'].errors && controlRegister['password'].errors['password']" [ngClass]= "'error'">Le mot de passe n'est pas valide</div>
      </ng-template>
    </div>
    <div>
      <p>Vous avez déjà un compte ? 
        <a class="nav-link" [routerLink]="['/user/login']" routerLinkActive="active" > Se connecter</a>
      </p>
    </div>
    <button type="submit" [disabled]="controlRegister.invalid" class="btn btn-primary">Inscription</button>
  </form>
  
  <ng-template [ngIf]="submitted && !signUpIsSuccessful && errorMessage" >
    <div class="messages-failed">
      <p>{{ errorMessage }}</p>
    </div>
  </ng-template>
</div>
{{ registerForm.value | json }}